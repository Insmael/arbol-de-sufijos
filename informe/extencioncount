la extención que se debe efectuar tanto en el trie normal como en el arbol patricia para soportar el método de conteo es el siguiente.
Cada vez que se agrega un elemento al arbol, cada sufijo aumenta en uno su número, esto es, cada nodo interno. luego, la memoria necesaria extra es un entero por nodo, con O(n) nodos, es un espacio extra de O(n). Las hojas también deben tener un número asociado. con n hojas, son O(n) enteros más. luego, la extención requiere de O(n) espacio extra, manteniendo la estructura completa con O(n) de espacio.
Cada nodo parte con su contador en cero. Cada vez que se accede al nodo desde el insertVisitor, se aumenta en uno su contador, reflejando el número de strings que tiene en sus nodos.
Los nodos internos del arbol patricia y del arbol de sufijos (PNode y SNode) tienen una posibilidad extra en el flujo de inserción de strings. En el caso de que se tenga un camino que solo comparta una parte con un camino ya existente (por ejemplo, los caminos casa y caso comparten solo la parte cas, sin estar uno contenido en el otro), para lo que se crea un nuevo nodo para remplazar el antiguo (digamos, el de camino casa), asociado al camino común (cas), y  entonces se corta el camino hasta el último caracter que comparten, y el nuevo camino es lo compartido ( dar paso a dos nodos hijos, el antiguo nodo con el camino original (que en el ejemplo sería el nodo con camino casa) actualizado al nuevo camino (osea, a) y el nuevo nodo (el de camino caso, que tiene en efecto camino o), como se accede solo una vez al si
